import sqlite3 as sl
import json
import time

con = sl.connect('cafe.db')


# Client_base
with con:
    con.execute("""
        CREATE TABLE IF NOT EXISTS Client_base (
            id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
            name TEXT,
            telephone TEXT,
            password TEXT,
            address TEXT,
            teleg_id INTEGER,
            UNIQUE(telephone),
            UNIQUE(teleg_id),
            FOREIGN KEY (id) REFERENCES Orders (client_id)
        );
    """)

sql_insert = "INSERT INTO Client_base (name, telephone, password, address, teleg_id) values(?, ?, ?, ?, ?)"

test = [("–ò–≤–∞–Ω–æ–≤ –ü—ë—Ç—Ä", '+375 666 66 66', 'qwert123', '—É–ª–∏—Ü–∞ –ö–∏—Å–µ–ª—ë–≤–∞, –¥–æ–º 23, –∫–≤–∞—Ä—Ç–∏—Ä–∞ 43', 813209759),
       ("–û–∑–µ—Ä–æ–≤–∞ –ê–Ω–∞—Å—Ç–∞—Å–∏—è", '+375 456 66 6623', 'neasty', '—É–ª–∏—Ü–∞ –ö–∞—Ä–∞—Å—ë–≤–∞, –¥–æ–º 57, –∫–≤–∞—Ä—Ç–∏—Ä–∞ 90', 111809759),
       ("–ö–∏—Å–µ–ª—ë–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä", '+375 324 66 662', 'adrei1234', '—É–ª–∏—Ü–∞ –ü—É—à–∫–∏–Ω–∞, –¥–æ–º 19, –∫–≤–∞—Ä—Ç–∏—Ä–∞ 55', 777809759),
       ("–ù–æ—Ä–º–∞–Ω–Ω –î–∞–≤–∏–¥", '+375 666 78 66', 'david23d', '—É–ª–∏—Ü–∞ –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–∞, –¥–æ–º 17, –∫–≤–∞—Ä—Ç–∏—Ä–∞ 58', 810889759),
       ("Jason Statham", '+375 56 66 55', 'mechanic', '—É–ª–∏—Ü–∞ –ö–∏—Å–µ–ª—ë–≤–∞, –¥–æ–º 31, –∫–≤–∞—Ä—Ç–∏—Ä–∞ 15', 810800029),
       ("Jason Born", '+375 455 66 66', '123tqwer', '—É–ª–∏—Ü–∞ –ö—É–π–±—ã—à–µ–≤–∞, –¥–æ–º 23, –∫–≤–∞—Ä—Ç–∏—Ä–∞ 72', 810856759),
       ('–ø–∞—à–∞ –∫–∞—Ä–ø–æ–≤', '+375 44 343546', 'qwertyui12', '—É–ª–∏—Ü–∞ –ü—É—à–∫–∏–Ω–∞, –¥–æ–º 21, –∫–≤–∞—Ä—Ç–∏—Ä–∞ 30', 810809759)]
try:
    with con:
        con.executemany(sql_insert, test)






    # Category
    with con:
        con.execute("""
             CREATE TABLE IF NOT EXISTS Category (
                 id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
                 name TEXT,
                 FOREIGN KEY (id) REFERENCES Menu (category)
             );
         """)

    sql_insert = "INSERT INTO Category (name) values(?)"



    with con:
        con.execute(sql_insert, ["–ó–∞–∫—É—Å–∫–∏"])
        con.execute(sql_insert, ["–ù–∞–ø–∏—Ç–∫–∏"])
        con.execute(sql_insert, ["–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞"])
        con.execute(sql_insert, ["–ü–∏—Ü—Ü–∞"])
        con.execute(sql_insert, ["–°—É–ø—ã"])






    # Menu
    with con:
        con.execute("""
            CREATE TABLE IF NOT EXISTS Menu (
                id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
                category INTEGER,
                name TEXT,
                price INTEGER,
                picture TEXT,
                description TEXT,
                cooking_time INTEGER,
                amount INTEGER,
                FOREIGN KEY (id) REFERENCES Order_list (dish)
            );
        """)

    sql_insert = "INSERT INTO Menu (category, name, price, picture, description, cooking_time, amount) values(?, ?, ?, ?, ?, ?, ?)"

    test3 = [(1, "–õ—É–∫–æ–≤—ã–µ –∫–æ–ª—å—Ü–∞", 7.9, "–ª—É–∫–æ–≤—ã–µ –∫–æ–ª—å—Ü–∞.jpg", "–õ—É–∫–æ–≤—ã–µ –∫–æ–ª—å—Ü–∞, —Å–æ—É—Å –ë–∞—Ä–±–µ–∫—é —Å –º–∞–π–æ–Ω–µ–∑–æ–º", "10 –º–∏–Ω—É—Ç", 21),
            (2, "–õ–∏–º–æ–Ω–∞–¥ –ö–ª—é–∫–≤–∞-–º–∞–ª–∏–Ω–∞", 5.2, "–õ–∏–º–æ–Ω–∞–¥ –ö–ª—é–∫–≤–∞-–º–∞–ª–∏–Ω–∞.jpg", "–ö–ª—é–∫–≤–µ–Ω–Ω—ã–π –º–æ—Ä—Å, –±–æ–Ω–∞–∫–≤–∞ —Å–∏–ª—å–Ω–æ–≥–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, –∫–ª—é–∫–≤–∞, —Ç–∏–º—å—è–Ω, –ª–∏–º–æ–Ω", "5 –º–∏–Ω—É—Ç", 12),
            (3, "–ó–∞–ø–µ—á–µ–Ω–Ω—ã–µ –Ω—å–æ–∫–∫–∏ —Å —Ü—ã–ø–ª–µ–Ω–∫–æ–º –∏ –≥—Ä–∏–±–∞–º–∏", 14.7, "–ó–∞–ø–µ—á–µ–Ω–Ω—ã–µ –Ω—å–æ–∫–∫–∏ —Å —Ü—ã–ø–ª–µ–Ω–∫–æ–º –∏ –≥—Ä–∏–±–∞–º–∏.jpg", "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–µ –Ω—å–æ–∫–∫–∏, –∫—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ, –ª—É–∫, —à–∞–º–ø–∏–Ω—å–æ–Ω—ã, —Å–æ—É—Å –±–µ—à–∞–º–µ–ª—å, —Å—ã—Ä –ú–æ—Ü–∞—Ä–µ–ª–ª–∞", "20 –º–∏–Ω—É—Ç", 39),
            (4, "–ë–∞–≤–∞—Ä—Å–∫–∞—è", 22, "–ë–∞–≤–∞—Ä—Å–∫–∞—è.jpg", "–ö–æ–ª–±–∞—Å–∫–∏ –æ—Ö–æ—Ç–Ω–∏—á—å–∏, –±–µ–∫–æ–Ω, –æ–≥—É—Ä–µ—Ü –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–π, –ª—É–∫ –∫—Ä–∞—Å–Ω—ã–π, —Å–æ—É—Å –†—ç–Ω—á, —Å–æ—É—Å –≥–æ—Ä—á–∏—á–Ω—ã–π, —Å—ã—Ä –ú–æ—Ü–∞—Ä–µ–ª–ª–∞, –ª—É–∫–æ–≤—ã–µ —á–∏–ø—Å—ã, –æ—Ä–µ–≥–∞–Ω–æ", "15 –º–∏–Ω—É—Ç",31),
            (5, "–ë–æ—Ä—â —Å –∫–æ–ø—á–µ–Ω—ã–º —Ä–µ–±—Ä–æ–º", 9.6, "–ë–æ—Ä—â —Å –∫–æ–ø—á–µ–Ω—ã–º —Ä–µ–±—Ä–æ–º.jpg", "–°–≤–∏–Ω–æ–µ –∫–æ–ø—á–µ–Ω–æ–µ —Ä–µ–±—Ä—ã—à–∫–æ, —Å–≤–µ–∫–ª–∞, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å, –ø–∞—Å—Ç–∞ —Ç–æ–º–∞—Ç–Ω–∞—è, –±—É–ª—å–æ–Ω, –º–æ—Ä–∫–æ–≤—å, –ª—É–∫, —á–µ—Å–Ω–æ–∫, —Å–º–µ—Ç–∞–Ω–∞, —É–∫—Ä–æ–ø", "15 –º–∏–Ω—É—Ç", 0),
            (1, "–ö—É—Ä–∏–Ω—ã–µ –Ω–∞–≥–≥–µ—Ç—Å—ã", 8.6, "–ö—É—Ä–∏–Ω—ã–µ –Ω–∞–≥–≥–µ—Ç—Å—ã.jpg", "–ö—É—Ä–∏–Ω—ã–µ –Ω–∞–≥–≥–µ—Ç—Å—ã —Å —Å–æ—É—Å–æ–º –∫–µ—Ç—á—É–ø", "5 –º–∏–Ω—É—Ç", 23),
            (1, "–ó–∞–ø–µ—á—ë–Ω–Ω—ã–π –ß–µ–¥–¥–µ—Ä —Å —Å–æ—É—Å–æ–º –†–æ—É–∑ –ú—ç—Ä–∏", 15.9, "–ó–∞–ø–µ—á—ë–Ω–Ω—ã–π –ß–µ–¥–¥–µ—Ä.jpg", "–°—ã—Ä –ß–µ–¥–¥–µ—Ä –≤ –ø–∞–Ω–∏—Ä–æ–≤–∫–µ, —Å–æ—É—Å –†–æ—É–∑ –ú—ç—Ä–∏, –º–∏–∫—Å —Å–∞–ª–∞—Ç–æ–≤, —Ç–æ–º–∞—Ç —á–µ—Ä—Ä–∏, –º–∞—Å–ª–æ –±–∞–∑–∏–ª–∏–∫", "10 –º–∏–Ω—É—Ç", 53),
            (1, "–ö–∞—Ä–ø–∞—á—á–æ –∏–∑ –≥–æ–≤—è–¥–∏–Ω—ã", 19.3, "–ö–∞—Ä–ø–∞—á—á–æ –∏–∑ –≥–æ–≤—è–¥–∏–Ω—ã.jpg", "–ú–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω–∞—è –≥–æ–≤—è–¥–∏–Ω–∞, —Ç–æ–º–∞—Ç —á–µ—Ä—Ä–∏, —Å–∞–ª–∞—Ç —Ä—É–∫–∫–æ–ª–∞, —Å—ã—Ä –ü–∞—Ä–º–µ–∑–∞–Ω, –ª—É–∫–æ–≤—ã–µ —á–∏–ø—Å—ã, –º–µ–¥–æ–≤–∞—è –∑–∞–ø—Ä–∞–≤–∫–∞", "10 –º–∏–Ω—É—Ç", 0),
            (2, "–õ–∞—Ç—Ç–µ –û—Ä–µ–æ", 7, "–õ–∞—Ç—Ç–µ –û—Ä–µ–æ.jpg", "–õ–∞—Ç—Ç–µ —Å –º–æ–ª–æ—á–Ω—ã–º —à–æ–∫–æ–ª–∞–¥–æ–º –∏ –¥—Ä–æ–±–ª–µ–Ω—ã–º –ø–µ—á–µ–Ω—å–µ–º –û–†–ï–û", "5 –º–∏–Ω—É—Ç", 19),
            (2, "–ê–π—Å –õ–∞—Ç—Ç–µ", 4.5, "–ê–π—Å –õ–∞—Ç—Ç–µ.jpg", "–≠—Å–ø—Ä–µ—Å—Å–æ, –º–æ–ª–æ–∫–æ, –ª–µ–¥", "5 –º–∏–Ω—É—Ç", 3),
            (3, "–ß–∏–ª–∏ –æ–∫–æ—Ä–æ—á–æ–∫ —Å –∂–∞—Ä–µ–Ω—ã–º –∫–∞—Ä—Ç–æ—Ñ–µ–ª–µ–º üå∂", 15.7, "–ß–∏–ª–∏ –æ–∫–æ—Ä–æ—á–æ–∫ —Å –∂–∞—Ä–µ–Ω—ã–º –∫–∞—Ä—Ç–æ—Ñ–µ–ª–µ–º.jpg", "–û–∫–æ—Ä–æ—á–æ–∫ –∫—É—Ä–∏–Ω—ã–π, –∂–∞—Ä–µ–Ω—ã–π –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å, –∫–∞–ø—É—Å—Ç–∞ –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω–∞—è, —Å–æ—É—Å –†—ç–Ω—á, —Å–æ—É—Å –ß–∏–ª–∏, –ø–µ—Ç—Ä—É—à–∫–∞", "20 –º–∏–Ω—É—Ç", 23),
            (3, "–ì–æ–≤—è–¥–∏–Ω–∞ c –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–º–∏ –¥–æ–ª—å–∫–∞–º–∏ –∏ –æ–≤–æ—â–∞–º–∏ –Ω–∞ –≥—Ä–∏–ª–µ", 29.7, "–ì–æ–≤—è–¥–∏–Ω–∞ c –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–º–∏ –¥–æ–ª—å–∫–∞–º–∏ –∏ –æ–≤–æ—â–∞–º–∏ –Ω–∞ –≥—Ä–∏–ª–µ.jpg", "–§–∏–ª–µ –≥–æ–≤—è–¥–∏–Ω—ã, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–µ –¥–æ–ª—å–∫–∏, –æ–≤–æ—â–∏ –Ω–∞ –≥—Ä–∏–ª–µ: —Ü—É–∫–∏–Ω–∏, —à–∞–º–ø–∏–Ω—å–æ–Ω—ã, –º–∏–∫—Å –ø–µ—Ä—Ü–µ–≤, –ª—É–∫ –∫—Ä–∞—Å–Ω—ã–π, —Ç–æ–º–∞—Ç —á–µ—Ä—Ä–∏, –º–∞—Å–ª–æ –±–∞–∑–∏–ª–∏–∫", "20 –º–∏–Ω—É—Ç", 30),
            (4, "–¶—ã–ø–ª–µ–Ω–æ–∫ –∫–∞—Ä—Ä–∏", 17.9, "–¶—ã–ø–ª–µ–Ω–æ–∫ –∫–∞—Ä—Ä–∏.jpg", "–¶—ã–ø–ª–µ–Ω–æ–∫, –∞–Ω–∞–Ω–∞—Å—ã, —Å–æ—É—Å –∫–∞—Ä—Ä–∏, –∫—Ä–∞—Å–Ω—ã–π –ª—É–∫, —Å–ª–∞–¥–∫–∏–π –ø–µ—Ä–µ—Ü, –º–æ—Ü–∞—Ä–µ–ª–ª–∞, —Ç–æ–º–∞—Ç–Ω—ã–π —Å–æ—É—Å", "15 –º–∏–Ω—É—Ç", 14),
            (4, "–ß–µ—Ç—ã—Ä–µ —Å–µ–∑–æ–Ω–∞", 17.9, "–ß–µ—Ç—ã—Ä–µ —Å–µ–∑–æ–Ω–∞.jpg", "–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–µ —Ç—Ä–∞–≤—ã, —Ç–æ–º–∞—Ç–Ω—ã–π —Å–æ—É—Å, —Ç–æ–º–∞—Ç—ã, –ø–∏–∫–∞–Ω—Ç–Ω–∞—è –ø–µ–ø–ø–µ—Ä–æ–Ω–∏, –∫—É–±–∏–∫–∏ –±—Ä—ã–Ω–∑—ã, –º–æ—Ü–∞—Ä–µ–ª–ª–∞, –≤–µ—Ç—á–∏–Ω–∞, —à–∞–º–ø–∏–Ω—å–æ–Ω—ã", "15 –º–∏–Ω—É—Ç", 19),
            (5, "–¢–æ–º –ö—Ö–∞ —Å —Ü—ã–ø–ª–µ–Ω–∫–æ–º üå∂", 13.9, "–¢–æ–º –ö—Ö–∞ —Å —Ü—ã–ø–ª–µ–Ω–∫–æ–º.jpg", "–ë—É–ª—å–æ–Ω, –∫–æ–∫–æ—Å–æ–≤–æ–µ –º–æ–ª–æ–∫–æ, —Ü—ã–ø–ª–µ–Ω–æ–∫-–≥—Ä–∏–ª—å, —Å–ª–∏–≤–∫–∏, —Ç–æ–º–∞—Ç—ã —á–µ—Ä—Ä–∏, —à–∞–º–ø–∏–Ω—å–æ–Ω—ã, –ª–∞–π–º, –ø–µ—Ä–µ—Ü —á–∏–ª–∏, –∫–∏–Ω–∑–∞, –ª—É–∫-–ø–æ—Ä–µ–π, –æ–Ω–∏–≥–∏—Ä–∏. –û—Å—Ç—Ä–æ–µ", "15 –º–∏–Ω—É—Ç", 16),
            (5, "–¢–æ–º –Ø–º —Å –ª–æ—Å–æ—Å–µ–º üå∂", 17.9, "–¢–æ–º –Ø–º —Å –ª–æ—Å–æ—Å–µ–º.jpg", "–ö—É—Ä–∏–Ω—ã–π –±—É–ª—å–æ–Ω, –∫–æ–∫–æ—Å–æ–≤–æ–µ –º–æ–ª–æ–∫–æ, —Ñ–∏–ª–µ –ª–æ—Å–æ—Å—è, —Å–ª–∏–≤–∫–∏, –≥—Ä–∏–±—ã —à–∏–∏—Ç–∞–∫–µ, —Ç–∞–∫—É–∞–Ω, –ø–µ—Ä–µ—Ü —á–∏–ª–∏, –∫–∏–Ω–∑–∞, –ª–∞–π–º, –æ–Ω–∏–≥–∏—Ä–∏. –û—Å—Ç—Ä–æ–µ.", "15 –º–∏–Ω—É—Ç", 9)]

    with con:
        con.executemany(sql_insert, test3)









    # Order_list
    with con:
        con.execute("""
            CREATE TABLE IF NOT EXISTS Order_list (
                id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
                client_id INTEGER,
                dish INTEGER,
                amount INTEGER,
                shop_number,
                FOREIGN KEY (client_id) REFERENCES orders (client_id)
            );
        """)

    sql_insert = "INSERT INTO Order_list (client_id, dish, amount, shop_number) values(?, ?, ?, ?)"

    test4 = [(1, 1, 2, 1),
             (2, 2, 1, 2),
             (3, 3, 2, 3),
             (3, 5, 1, 4),
             (1, 4, 3, 5),
             (3, 5, 1, 6)]


    with con:
        con.executemany(sql_insert, test4)









    # Orders

    with con:
        con.execute("""
            CREATE TABLE IF NOT EXISTS Orders (
                id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
                client_id INTEGER,
                date INTEGER,
                delivery_time INTEGER,
                order_price INTEGER,
                way_to_get TEXT,
                shop_number INTEGER,
                order_table TEXT      
            );
        """)

    sql_insert = "INSERT INTO Orders (client_id, date, delivery_time, order_price, way_to_get, shop_number, order_table) values(?, ?, ?, ?, ?, ?, ?)"

    test5 = [(1, '2020-01-08T13:00:00.000Z', '2020-01-08T14:00:00.000Z', 70, "–¥–æ—Å—Ç–∞–≤–∫–∞", 1, 'NULL'),
             (2, '2020-09-08T10:00:00.000Z', '2020-09-08T11:00:00.000Z', 30, "—Ä–µ—Å—Ç–æ—Ä–∞–Ω", 2, '1 —Å—Ç–æ–ª / –¥–æ 4 —á–µ–ª–æ–≤–µ–∫'),
             (3, '2022-06-08T10:00:00.000Z', '2022-06-08T11:00:00.000Z', 130, "–¥–æ—Å—Ç–∞–≤–∫–∞", 3, 'NULL'),
             (4, '2022-03-08T10:00:00.000Z', '2022-03-08T11:00:00.000Z', 60, "–¥–æ—Å—Ç–∞–≤–∫–∞", 4, 'NULL'),
             (5, '2022-04-08T10:00:00.000Z', '2022-04-08T11:00:00.000Z', 70, "—Ä–µ—Å—Ç–æ—Ä–∞–Ω", 5, '1 —Å—Ç–æ–ª / –¥–æ 8 —á–µ–ª–æ–≤–µ–∫'),
             (6, '2022-05-08T10:00:00.000Z', '2022-05-08T11:00:00.000Z', 80, "—Ä–µ—Å—Ç–æ—Ä–∞–Ω", 6, '1 —Å—Ç–æ–ª / –¥–æ 4 —á–µ–ª–æ–≤–µ–∫')]

    with con:
        con.executemany(sql_insert, test5)

    # with con:
    #     data5 = con.execute("SELECT * FROM Orders")
    #     print(data5.fetchall())



except:
    print("–¢–∞–∫–æ–π –Ω–æ–º–µ—Ä –∏–ª–∏ telegram id —É–∂–µ –∑–∞–Ω—è—Ç")

con.execute